<% include partials/head.ejs %>
<section class="profile">
    <% include partials/admin-panel.ejs %>
     <main>
     <h1><%= title %></h1>

    <table class="articleListTable dataTable">
        <% results.forEach( result =>{ %>
            <tr>
                <td><%= result.heading %></td>
                <td><%= result.username %></td>
                <td><%= result.author %></td>
                <td><a href="/rediger_artikel/<%= result.id %>" class="aBtn">Rediger</a></td>
                <td><a href="#" class="delBtn delBtnArticle" data-id="<%= result.id %>">Slet</a></td>
            </tr>
        <% }) %>
    </table>
     
    </main> 
    </section>


<script>
document.addEventListener('DOMContentLoaded', () =>{
    const DelBtn = document.querySelectorAll('.delBtnArticle');
    DelBtn.forEach(btn => {
       btn.addEventListener('click', 
        event => {

            const id = event.target.dataset.id;

            fetch(`/rediger_artikel/${id}`, {
                'method': 'DELETE'
            })
            .then(response => {
                if(response.status === 200){
                    window.location.reload();
                }
            });

        }); 
    });



});



</script>

<% include partials/footer.ejs %>
<% include partials/after-footer.ejs %>